<!-- <div class="container">
    <div class="challenge-list">
        <mat-accordion>
            @for(currentChallenge of (allChallenges$|async);track $index){
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            {{currentChallenge.title}} 
                        </mat-panel-title>
                        @if(currentChallenge.startDate && currentChallenge.endDate){
                            <span>
                                {{isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'Active ' : 'Not Active ' }}
                            </span>
                        }
                   From: {{currentChallenge.startDate| date:'MMMM d, y'}} - Till: {{currentChallenge.endDate| date:'MMMM d, y'}}
                    </mat-expansion-panel-header>
                    {{currentChallenge.description}} 
                </mat-expansion-panel>
            }
            </mat-accordion>
            </div>

 <div class="challenge-form"> -->
<!-- <button mat-raised-button color="primary" (click)="setIsAddChallenge()">Add Challenge</button>
@if(isAddChallenge){ -->
    <!-- <form [formGroup]="challengeForm" (ngSubmit)="onSubmitAddChallenge()">
        <mat-card>
            <mat-card-title class="center-title">Add a new challenge</mat-card-title>
            <mat-card-content>
                <mat-form-field appearance="fill">
                    <mat-label for="title">Title</mat-label>
                    <input matInput id="title" formControlName="title" required>
                    @if (challenge['title']&&challenge['title'].errors &&challenge['title'].touched) {
                    @if(challenge['title'].errors['required']) {
                    <mat-error>Title is required</mat-error>
                    }
                    @if(challenge["title"].errors["minlength"]) {
                    <mat-error>Title must be at least 4 characters</mat-error>
                    }
                    @if(challenge["title"].errors["maxlength"]) {
                    <mat-error>Title must be at most 8 characters</mat-error>
                    }
                    }
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label for="description">Description:</mat-label>
                    <input matInput id="description" formControlName="description" required>
                    @if (challenge['description']&&challenge['description'].errors &&challenge['description'].touched) {
                    @if(challenge['description'].errors["required"]) {
                    <mat-error>Description is required</mat-error>
                    }
                    @if(challenge["description"].errors["minlength"]) {
                    <mat-error>Description must be at least 15 characters</mat-error>
                    }
                    }
                </mat-form-field>
            </mat-card-content>
            <mat-card-actions class="center-actions">
                <button mat-raised-button color="primary" type="submit"
                    [disabled]="challengeForm.invalid">Submit</button>
            </mat-card-actions>
        </mat-card>
    </form> -->
<!-- } -->

<!-- </div>
</div> -->

<div class="container">
    <div class="challenge-list">
        <h2>Challenge Board</h2>
        <mat-accordion>
            @for(currentChallenge of (allChallenges$|async);track $index){
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            {{currentChallenge.title}} 
                        </mat-panel-title>
                        <div class="panel-subtitle">
                            @if(currentChallenge.startDate && currentChallenge.endDate){
                                <span class="status-badge" [ngClass]="isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'active' : 'inactive'">
                                    {{isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'Active' : 'Not Active'}}
                                </span>
                            }
                            <span class="date-range">
                                From: {{currentChallenge.startDate| date:'MMMM d, y'}} - Till: {{currentChallenge.endDate| date:'MMMM d, y'}}
                            </span>
                        </div>
                    </mat-expansion-panel-header>
                    <div class="challenge-description">
                        {{currentChallenge.description}} 
                    </div>
                </mat-expansion-panel>
            }
        </mat-accordion>
    </div>
<!-- 
    <div class="challenge-form">
        <form [formGroup]="challengeForm" (ngSubmit)="onSubmitAddChallenge()">
            <mat-card>
                <mat-card-title>Create New Challenge</mat-card-title>
                <mat-card-content>
                    <mat-form-field appearance="fill">
                        <mat-label for="title">Challenge Title</mat-label>
                        <input matInput id="title" formControlName="title" placeholder="Enter an engaging title" required>
                        @if (challenge['title']&&challenge['title'].errors &&challenge['title'].touched) {
                            @if(challenge['title'].errors['required']) {
                                <mat-error>Title is required</mat-error>
                            }
                            @if(challenge["title"].errors["minlength"]) {
                                <mat-error>Title must be at least 4 characters</mat-error>
                            }
                            @if(challenge["title"].errors["maxlength"]) {
                                <mat-error>Title must be at most 8 characters</mat-error>
                            }
                        }
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label for="description">Challenge Description</mat-label>
                        <textarea matInput id="description" formControlName="description" 
                                  placeholder="Describe what this challenge is about" rows="4" required></textarea>
                        @if (challenge['description']&&challenge['description'].errors &&challenge['description'].touched) {
                            @if(challenge['description'].errors["required"]) {
                                <mat-error>Description is required</mat-error>
                            }
                            @if(challenge["description"].errors["minlength"]) {
                                <mat-error>Description must be at least 15 characters</mat-error>
                            }
                        }
                    </mat-form-field>
                </mat-card-content>
                <mat-card-actions>
                    <button mat-raised-button color="primary" type="submit"
                            [disabled]="challengeForm.invalid">CREATE CHALLENGE</button>
                </mat-card-actions>
            </mat-card>
        </form>
    </div> -->
    <div class="challenge-form">
        <!-- כותרת הטופס עם רקע מיוחד -->
        <div class="form-header">
            <h2>צור אתגר חדש</h2>
            <p>הוסף את האתגר הבא שלך לרשימת האתגרים</p>
        </div>
        
        <div class="form-content">
            <form [formGroup]="challengeForm" (ngSubmit)="onSubmitAddChallenge()">
                <mat-card>
                    <mat-card-content>
                        <!-- שדה כותרת האתגר -->
                        <mat-form-field appearance="fill">
                            <mat-label for="title">כותרת האתגר</mat-label>
                            <input matInput id="title" formControlName="title" placeholder="הזן כותרת קצרה ומעניינת" required>
                            @if (challenge['title']&&challenge['title'].errors &&challenge['title'].touched) {
                                @if(challenge['title'].errors['required']) {
                                    <mat-error>נדרש להזין כותרת</mat-error>
                                }
                                @if(challenge["title"].errors["minlength"]) {
                                    <mat-error>כותרת חייבת להכיל לפחות 4 תווים</mat-error>
                                }
                                @if(challenge["title"].errors["maxlength"]) {
                                    <mat-error>כותרת יכולה להכיל לכל היותר 8 תווים</mat-error>
                                }
                            }
                        </mat-form-field>
                        
                        <!-- שדה תיאור האתגר -->
                        <mat-form-field appearance="fill">
                            <mat-label for="description">תיאור האתגר</mat-label>
                            <textarea matInput id="description" formControlName="description" 
                                    placeholder="תאר את האתגר בפירוט, כולל מטרות ויעדים..." rows="5" required></textarea>
                            @if (challenge['description']&&challenge['description'].errors &&challenge['description'].touched) {
                                @if(challenge['description'].errors["required"]) {
                                    <mat-error>נדרש להזין תיאור</mat-error>
                                }
                                @if(challenge["description"].errors["minlength"]) {
                                    <mat-error>תיאור חייב להכיל לפחות 15 תווים</mat-error>
                                }
                            }
                        </mat-form-field>
                    </mat-card-content>
                    
                    <mat-card-actions>
                        <div class="submit-button-container">
                            <button mat-raised-button class="submit-button" type="submit"
                                    [disabled]="challengeForm.invalid">פרסם אתגר</button>
                        </div>
                    </mat-card-actions>
                </mat-card>
            </form>
            
            <div class="form-footer">
                <p>על ידי יצירת אתגר חדש, אתה מסכים <a href="#">לתנאי השירות</a> שלנו</p>
            </div>
        </div>
    </div>
</div>